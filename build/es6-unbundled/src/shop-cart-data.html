<html><head><link rel="import" href="../bower_components/polymer/polymer-element.html"><link rel="import" href="../bower_components/app-storage/app-localstorage/app-localstorage-document.html"></head><body><dom-module id="shop-cart-data"><template><app-localstorage-document key="shop-cart-data" data="{{cart}}"></app-localstorage-document></template><script>class ShopCartData extends Polymer.Element{static get is(){return'shop-cart-data'}static get properties(){return{cart:{type:Array,value:()=>[],notify:!0},numItems:{type:Number,computed:'_computeNumItems(cart.splices)',notify:!0},total:{type:Number,computed:'_computeTotal(cart.splices)',notify:!0}}}addItem(a){let b=this._indexOfEntry(a.item.name,a.size);-1!==b&&(a.quantity+=this.cart[b].quantity),this.setItem(a)}setItem(a){let b=this._indexOfEntry(a.item.name,a.size);0===a.quantity?-1!==b&&this.splice('cart',b,1):-1===b?this.push('cart',a):this.splice('cart',b,1,a)}clearCart(){this.cart=[]}_computeNumItems(){return this.cart?this.cart.reduce((a,b)=>{return a+b.quantity},0):0}_computeTotal(){return this.cart?this.cart.reduce((a,b)=>{return a+b.quantity*b.item.price},0):0}_indexOfEntry(a,b){if(this.cart)for(let d,c=0;c<this.cart.length;++c)if(d=this.cart[c],d.item.name===a&&d.size===b)return c;return-1}}customElements.define(ShopCartData.is,ShopCartData);</script></dom-module></body></html>